<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Snake Xenzia</title>
<style>
  body {
    margin: 0;
    height: 100vh;
    background: #111;
    display: flex;
    justify-content: center;
    align-items: center;
    font-family: Arial, sans-serif;
    color: white;
  }

  .container {
    text-align: center;
  }

  input, button {
    padding: 10px;
    font-size: 16px;
    border-radius: 8px;
    border: none;
    outline: none;
    margin: 5px;
  }

  button {
    background: #00ff99;
    cursor: pointer;
  }

  canvas {
    background: black;
    display: none;
    border: 2px solid #00ff99;
  }

  #gameOver {
    display: none;
    font-size: 22px;
    margin-top: 15px;
    color: #ff6666;
  }
</style>
</head>

<body>
<div class="container">
  <div id="nameScreen">
    <h2>Enter Your Name üêç</h2>
    <input type="text" id="playerName" placeholder="Your name">
    <br>
    <button onclick="startGame()">Start Game</button>
  </div>

  <canvas id="game" width="400" height="400"></canvas>

  <div id="gameOver"></div>
</div>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

let snake, food, dx, dy, score, name;

const box = 20;

function startGame() {
  name = document.getElementById("playerName").value.trim();
  if (name === "") {
    alert("Please enter your name");
    return;
  }

  document.getElementById("nameScreen").style.display = "none";
  canvas.style.display = "block";

  snake = [{ x: 200, y: 200 }];
  food = randomFood();
  dx = box;
  dy = 0;
  score = 0;

  document.getElementById("gameOver").style.display = "none";

  document.addEventListener("keydown", changeDirection);
  gameLoop = setInterval(draw, 120);
}

function randomFood() {
  return {
    x: Math.floor(Math.random() * 20) * box,
    y: Math.floor(Math.random() * 20) * box
  };
}

function draw() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);

  // draw food
  ctx.fillStyle = "red";
  ctx.fillRect(food.x, food.y, box, box);

  // draw snake
  ctx.fillStyle = "#00ff99";
  snake.forEach(part => ctx.fillRect(part.x, part.y, box, box));

  let head = { x: snake[0].x + dx, y: snake[0].y + dy };

  // game over conditions
  if (
    head.x < 0 || head.y < 0 ||
    head.x >= canvas.width || head.y >= canvas.height ||
    snake.some(part => part.x === head.x && part.y === head.y)
  ) {
    clearInterval(gameLoop);
    canvas.style.display = "none";
    document.getElementById("gameOver").style.display = "block";
    document.getElementById("gameOver").innerHTML =
      `<b>${name}</b> is a snake in everyone‚Äôs life üêç<br><br>
       <button onclick="location.reload()">Play Again</button>`;
    return;
  }

  snake.unshift(head);

  if (head.x === food.x && head.y === food.y) {
    food = randomFood();
  } else {
    snake.pop();
  }
}

function changeDirection(e) {
  if (e.key === "ArrowUp" && dy === 0) { dx = 0; dy = -box; }
  if (e.key === "ArrowDown" && dy === 0) { dx = 0; dy = box; }
  if (e.key === "ArrowLeft" && dx === 0) { dx = -box; dy = 0; }
  if (e.key === "ArrowRight" && dx === 0) { dx = box; dy = 0; }
}
</script>
</body>
</html>
